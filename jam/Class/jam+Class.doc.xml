<?xml-stylesheet href="../-mix+doc/index.xsl" type="text/xsl" ?>
<doc:root
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:wc="https://github.com/nin-jin/wc"
    xmlns:doc="https://github.com/nin-jin/doc"
    >

    <h1>$jam.$Class</h1>

    <p>Создаёт класс - функцию, создающую объекты. Все классы при инициализации принимают 1 параметр. Если он является инстансом того же класса, то он и возвращается, иначе будет создан новый объект, через статический метод класса create, которому будет передан этот параметр. Инстанцирование через new идёт в обход всех проверок, и создаёт новый неинициализированный инстанс.</p>

    <wc:test-js> _done( $jam.$Class ) </wc:test-js>
    <wc:test-js>
        var ClassInner
        var Class= $jam.$Class(function( klass ){
            ClassInner= klass
        })
        _done( Class, ClassInner )
    </wc:test-js>
    <wc:test-js>
        var Class= $jam.$Class(function( klass ){ })
        if( Class() instanceof Class ) _done()
    </wc:test-js>
    <wc:test-js>
        var obj= {}
        var Class= $jam.$Class(function( klass ){
            klass.create= function(){
                return obj
            }
        })
        _done( Class(), obj )
    </wc:test-js>
    <wc:test-js>
        var obj1= {}
        var Class= $jam.$Class(function( klass ){
            klass.create= function(){
                return obj1
            }
        })
        var obj2= new Class
        if( obj2 instanceof Class ) _done()
    </wc:test-js>
    <wc:test-js>
        var Class= $jam.$Class(function( klass ){
            klass.prototype.method= function(){
                return obj1
            }
        })
        var obj1= new Class
        var obj2= Class()
        _done( obj1.method, obj2.method )
    </wc:test-js>

</doc:root>
